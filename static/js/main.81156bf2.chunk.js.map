{"version":3,"sources":["PhotoDetail.js","PhotoList.js","Component/TitleBar.js","App.js","index.js"],"names":["PhotoDetail","props","id","match","params","_useState","useState","image","_useState2","Object","slicedToArray","setImages","useEffect","fetch","then","response","json","ok","data","_useState3","_useState4","isTextInfoOpen","setTextInfoOpen","react_default","a","createElement","className","Link","to","src","url","Button_default","onClick","style","color","Slide_default","direction","in","mountOnEnter","unmountOnExit","Typography_default","fontSize","title","dist_default","format","date","PhotoList","_ref","imagesList","onLinkClick","gridSize","columnsDef","loadMore","Grid_default","container","spacing","map","item","key","xs","sm","md","concat","lib_default","width","height","alt","description","TitleBar","setGridSize","anchorEl","setAnchorEl","handleChange","size","AppBar_default","position","Toolbar_default","variant","event","currentTarget","aria-owns","undefined","aria-haspopup","Menu_default","open","Boolean","onClose","MenuItem_default","App","before","current","listSize","setListSize","_useState5","isLoaded","error","_useState6","apiStatus","setApiStatus","_useState7","_useState8","setImagesList","_useState9","imageInfo","_useState10","currentDetailStatus","setCurrentDetailStatus","String","console","log","toConsumableArray","images","objectSpread","intersectionOption","onChange","BrowserRouter","src_Component_TitleBar","src_PhotoList_0","find","elem","es","Route","path","render","src_PhotoDetail","assign","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.81156bf2.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Moment from 'react-moment';\r\n\r\nimport './detail.css';\r\n\r\nconst PhotoDetail = (props) => {\r\n  const { id } = props.match.params;\r\n  const [image, setImages] = useState(props.image);\r\n  useEffect(() => {\r\n    fetch('https://wfc-2019.firebaseapp.com/image/' + id)\r\n      .then(response => response.json())\r\n      .then(response => {\r\n        if(response.ok) {\r\n          setImages(response.data);\r\n        }\r\n      })\r\n  }, [id]);\r\n  const [isTextInfoOpen, setTextInfoOpen] = useState(false);\r\n\r\n  const handleClick = () => {\r\n    setTextInfoOpen(!isTextInfoOpen);\r\n  }\r\n\r\n  return (\r\n    <div className='photo-detail'>\r\n      <div>\r\n        <Link to='/'>\r\n          <div className='close-button'><i className=\"material-icons\">arrow_back_ios</i></div>\r\n        </Link>\r\n      </div>\r\n      <div className='photo'>\r\n        <img src={image.url} />\r\n      </div>\r\n      <div><Button className='close-button' onClick={handleClick}><i className=\"material-icons\" style={{color: '#fff'}}>info</i></Button></div>\r\n      <Slide direction=\"up\" in={isTextInfoOpen} mountOnEnter unmountOnExit>\r\n        <div className='info-card'>\r\n          <Typography style={{fontSize: '1.2rem'}}>Title: {image.title}</Typography>\r\n          <Typography style={{fontSize: '1.2rem'}}>Date: <Moment format='YYYY/MM/DD'>{image.date}</Moment></Typography>\r\n        </div>\r\n      </Slide>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PhotoDetail;","import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport LazyLoad from 'react-lazyload';\r\n// import InfiniteScroll from 'react-infinite-scroller';\r\n\r\n\r\nimport './PhotoList.css';\r\n\r\nconst PhotoList = ({imagesList, onLinkClick, gridSize, loadMore}) => {\r\n  const columnsDef = [6, 4, 3, 2, 1, 1, 1];\r\n  return (\r\n    <div className='photos-wrap'>\r\n      <Grid container spacing={8}>\r\n          {imagesList.map(image => (\r\n            <Grid item className='grid-item' key={image.id}\r\n              xs={columnsDef[gridSize]}\r\n              sm={columnsDef[gridSize+1]}\r\n              md={columnsDef[gridSize+2]}\r\n            >\r\n              <Link to={`/detail/${image.id}`} onClick={() => onLinkClick(image.id)}>\r\n                <div className='photo-aspectfix'>\r\n                  <div><LazyLoad><img className='list-img' src={image.url} width='100%' height='100%' alt={image.description} /></LazyLoad></div>\r\n                </div>\r\n              </Link>\r\n            </Grid>\r\n          ))}\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PhotoList;","import React, { useState } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport './TitleBar.css';\r\n\r\nconst TitleBar = ({setGridSize}) => {\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const handleClick = event => {\r\n    setAnchorEl(event.currentTarget);\r\n  }\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  }\r\n  const handleChange = size => {\r\n    setAnchorEl(null);\r\n    setGridSize(size);\r\n  }\r\n  return (\r\n    <AppBar position=\"fixed\" className='app-bar' color='primary'>\r\n      <Toolbar className='tool-bar'>\r\n        <Typography variant=\"h6\" color=\"inherit\">\r\n          Photo\r\n        </Typography>\r\n        <Button onClick={handleClick}\r\n          aria-owns={anchorEl ? 'simple-menu' : undefined}\r\n          aria-haspopup=\"true\"\r\n        >\r\n          <i className=\"material-icons\" style={{color: '#fff', }}>more_vert</i>\r\n        </Button>\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}\r\n        >\r\n          <MenuItem onClick={() => handleChange(0)}>グリッド(大)</MenuItem>\r\n          <MenuItem onClick={() => handleChange(1)}>グリッド(中)</MenuItem>\r\n          <MenuItem onClick={() => handleChange(2)}>グリッド(小)</MenuItem>\r\n        </Menu>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n\r\nexport default TitleBar;","import React, { useState, useEffect } from 'react';\r\nimport { BrowserRouter, Route, Link } from 'react-router-dom';\r\n// import 'intersection-observer'; // optional polyfill\r\nimport Observer from '@researchgate/react-intersection-observer';\r\n\r\nimport PhotoDetail from './PhotoDetail';\r\nimport PhotoList from './PhotoList';\r\nimport TitleBar from './Component/TitleBar';\r\nimport './animation.css';\r\n\r\nconst App = () => {\r\n  const [listSize, setListSize] = useState({before: 0, current: 0});\r\n  const [gridSize, setGridSize] = useState(1);\r\n  const [apiStatus, setApiStatus] = useState({isLoaded: false, error: false});\r\n  const [imagesList, setImagesList] = useState([]);\r\n  const [currentDetailStatus, setCurrentDetailStatus] = useState({id: null, imageInfo: {}});\r\n  useEffect(() => {\r\n    const url = 'https://wfc-2019.firebaseapp.com/images?'\r\n      + 'offset=' + String(listSize.before)\r\n      + '&limit=' + String(listSize.current - listSize.before);\r\n    console.log('started fetch');\r\n    fetch(url)\r\n      .then(response => response.json())\r\n      .then(response => {\r\n        if(response.ok) {\r\n          setImagesList([...imagesList, ...response.data.images]);\r\n          setApiStatus({...apiStatus, isLoaded: true, error: false});\r\n        } else {\r\n          setApiStatus({...apiStatus, isLoaded: true, error: true});\r\n          console.log('response is not ok.');\r\n        }\r\n      },\r\n      (error) => {\r\n        setApiStatus({...apiStatus, isLoaded: true, error: true});\r\n        console.log(error);\r\n      });\r\n  }, [listSize]);\r\n\r\n  function onLinkClick(id) {\r\n    setCurrentDetailStatus({id: id, imageInfo: imagesList.find(elem => elem.id === id)});\r\n  }\r\n\r\n  function gainListSize(size) {\r\n    setListSize({before: listSize.current, current: listSize.current + size});\r\n  }\r\n\r\n  function handleIntersection() {\r\n    gainListSize(50);\r\n  }\r\n\r\n  const intersectionOption = {\r\n    onChange: handleIntersection,\r\n  }\r\n\r\n  return (\r\n    <BrowserRouter>\r\n      <div>\r\n        <TitleBar setGridSize={setGridSize} />\r\n        <div style={{height: '70px'}}></div>\r\n        <PhotoList imagesList={imagesList} onLinkClick={onLinkClick} gridSize={gridSize} />\r\n        {apiStatus.isLoaded ? false : <div>Loading...</div>}\r\n        {apiStatus.error ? <div>再度読み込みしてね</div> : false}\r\n        <Observer {...intersectionOption}>\r\n        <div></div>\r\n        </Observer>\r\n\r\n        <Route path='/detail/:id' render={(props) => (\r\n          <PhotoDetail {...props} image={currentDetailStatus.imageInfo} />\r\n        )} />\r\n      </div>\r\n    </BrowserRouter>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}