{"version":3,"sources":["PhotoDetail.js","PhotoList.js","Component/TitleBar.js","App.js","index.js"],"names":["PhotoDetail","props","id","match","params","_useState","useState","image","_useState2","Object","slicedToArray","setImages","useEffect","fetch","then","response","json","ok","data","_useState3","_useState4","isTextInfoOpen","setTextInfoOpen","react_default","a","createElement","className","Link","to","src","url","alt","description","Button_default","onClick","style","color","Slide_default","direction","in","mountOnEnter","unmountOnExit","Typography_default","fontSize","title","dist_default","format","date","author","PhotoList","_ref","imagesList","onLinkClick","gridSize","columnsDef","loadMore","Grid_default","container","spacing","map","item","key","xs","sm","md","concat","lib_default","width","height","TitleBar","setGridSize","anchorEl","setAnchorEl","handleChange","size","AppBar_default","position","Toolbar_default","variant","event","currentTarget","aria-owns","undefined","aria-haspopup","Menu_default","open","Boolean","onClose","MenuItem_default","App","before","current","listSize","setListSize","_useState5","isLoaded","error","_useState6","apiStatus","setApiStatus","_useState7","_useState8","setImagesList","_useState9","imageInfo","_useState10","currentDetailStatus","setCurrentDetailStatus","String","console","log","toConsumableArray","images","objectSpread","intersectionOption","onChange","HashRouter","src_Component_TitleBar","src_PhotoList_0","find","elem","es","Route","path","render","src_PhotoDetail","assign","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.be88b169.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Button from '@material-ui/core/Button';\r\nimport Slide from '@material-ui/core/Slide';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Moment from 'react-moment';\r\n\r\nimport './detail.css';\r\n\r\nconst PhotoDetail = (props) => {\r\n  const { id } = props.match.params;\r\n  const [image, setImages] = useState(props.image);\r\n  useEffect(() => {\r\n    fetch('https://wfc-2019.firebaseapp.com/image/' + id)\r\n      .then(response => response.json())\r\n      .then(response => {\r\n        if(response.ok) {\r\n          setImages(response.data);\r\n        }\r\n      })\r\n  }, [id]);\r\n  const [isTextInfoOpen, setTextInfoOpen] = useState(false);\r\n\r\n  const handleClick = () => {\r\n    setTextInfoOpen(!isTextInfoOpen);\r\n  }\r\n\r\n  return (\r\n    <div className='photo-detail'>\r\n      <div>\r\n        <Link to='/'>\r\n          <div className='close-button'><i className=\"material-icons\">arrow_back_ios</i></div>\r\n        </Link>\r\n      </div>\r\n      <div className='photo'>\r\n        <img src={image.url} alt={image.description} />\r\n      </div>\r\n      <div><Button className='close-button' onClick={handleClick}><i className=\"material-icons\" style={{color: '#fff'}}>info</i></Button></div>\r\n      <Slide direction=\"up\" in={isTextInfoOpen} mountOnEnter unmountOnExit>\r\n        <div className='info-card'>\r\n          <Typography style={{fontSize: '1.2rem'}}>Title: {image.title}</Typography>\r\n          <Typography style={{fontSize: '1.2rem'}}>Date: <Moment format='YYYY/MM/DD'>{image.date}</Moment></Typography>\r\n          <Typography style={{fontSize: '1.2rem'}}>Author: {image.author}</Typography>\r\n        </div>\r\n      </Slide>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PhotoDetail;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport Grid from '@material-ui/core/Grid';\r\nimport LazyLoad from 'react-lazyload';\r\n// import InfiniteScroll from 'react-infinite-scroller';\r\n\r\n\r\nimport './PhotoList.css';\r\n\r\nconst PhotoList = ({imagesList, onLinkClick, gridSize, loadMore}) => {\r\n  const columnsDef = [6, 4, 3, 2, 1, 1, 1];\r\n  return (\r\n    <div className='photos-wrap'>\r\n      <Grid container spacing={8}>\r\n          {imagesList.map(image => (\r\n            <Grid item className='grid-item' key={image.id}\r\n              xs={columnsDef[gridSize]}\r\n              sm={columnsDef[gridSize+1]}\r\n              md={columnsDef[gridSize+2]}\r\n            >\r\n              <Link to={`/detail/${image.id}`} onClick={() => onLinkClick(image.id)}>\r\n                <div className='photo-aspectfix'>\r\n                  <div><LazyLoad><img className='list-img' src={image.url} width='100%' height='100%' alt={image.description} /></LazyLoad></div>\r\n                </div>\r\n              </Link>\r\n            </Grid>\r\n          ))}\r\n      </Grid>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default PhotoList;","import React, { useState } from 'react';\r\nimport AppBar from '@material-ui/core/AppBar';\r\nimport Toolbar from '@material-ui/core/Toolbar';\r\nimport Typography from '@material-ui/core/Typography';\r\nimport Button from '@material-ui/core/Button';\r\nimport Menu from '@material-ui/core/Menu';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport './TitleBar.css';\r\n\r\nconst TitleBar = ({setGridSize}) => {\r\n  const [anchorEl, setAnchorEl] = useState(null);\r\n  const handleClick = event => {\r\n    setAnchorEl(event.currentTarget);\r\n  }\r\n  const handleClose = () => {\r\n    setAnchorEl(null);\r\n  }\r\n  const handleChange = size => {\r\n    setAnchorEl(null);\r\n    setGridSize(size);\r\n  }\r\n  return (\r\n    <AppBar position=\"fixed\" className='app-bar' color='primary'>\r\n      <Toolbar className='tool-bar'>\r\n        <Typography variant=\"h6\" color=\"inherit\">\r\n          GridPics\r\n        </Typography>\r\n        <Button onClick={handleClick}\r\n          aria-owns={anchorEl ? 'simple-menu' : undefined}\r\n          aria-haspopup=\"true\"\r\n        >\r\n          <i className=\"material-icons\" style={{color: '#fff', }}>more_vert</i>\r\n        </Button>\r\n        <Menu\r\n          id=\"simple-menu\"\r\n          anchorEl={anchorEl}\r\n          open={Boolean(anchorEl)}\r\n          onClose={handleClose}\r\n        >\r\n          <MenuItem onClick={() => handleChange(0)}>グリッド(大)</MenuItem>\r\n          <MenuItem onClick={() => handleChange(1)}>グリッド(中)</MenuItem>\r\n          <MenuItem onClick={() => handleChange(2)}>グリッド(小)</MenuItem>\r\n        </Menu>\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n}\r\n\r\nexport default TitleBar;","import React, { useState, useEffect } from 'react';\r\nimport { HashRouter, Route } from 'react-router-dom';\r\nimport Observer from '@researchgate/react-intersection-observer';\r\n\r\nimport PhotoDetail from './PhotoDetail';\r\nimport PhotoList from './PhotoList';\r\nimport TitleBar from './Component/TitleBar';\r\n\r\nconst App = () => {\r\n  const [listSize, setListSize] = useState({before: 0, current: 0});\r\n  const [gridSize, setGridSize] = useState(1);\r\n  const [apiStatus, setApiStatus] = useState({isLoaded: false, error: false});\r\n  const [imagesList, setImagesList] = useState([]);\r\n  const [currentDetailStatus, setCurrentDetailStatus] = useState({id: null, imageInfo: {}});\r\n  useEffect(() => {\r\n    const url = 'https://wfc-2019.firebaseapp.com/images?'\r\n      + 'offset=' + String(listSize.before)\r\n      + '&limit=' + String(listSize.current - listSize.before);\r\n    console.log('started fetch');\r\n    fetch(url)\r\n      .then(response => response.json())\r\n      .then(response => {\r\n        if(response.ok) {\r\n          setImagesList([...imagesList, ...response.data.images]);\r\n          setApiStatus({...apiStatus, isLoaded: true, error: false});\r\n        } else {\r\n          setApiStatus({...apiStatus, isLoaded: true, error: true});\r\n          console.log('response is not ok.');\r\n        }\r\n      },\r\n      (error) => {\r\n        setApiStatus({...apiStatus, isLoaded: true, error: true});\r\n        console.log(error);\r\n      });\r\n  }, [listSize]);\r\n\r\n  function onLinkClick(id) {\r\n    setCurrentDetailStatus({id: id, imageInfo: imagesList.find(elem => elem.id === id)});\r\n  }\r\n\r\n  function gainListSize(size) {\r\n    setListSize({before: listSize.current, current: listSize.current + size});\r\n  }\r\n\r\n  function handleIntersection() {\r\n    gainListSize(50);\r\n  }\r\n\r\n  const intersectionOption = {\r\n    onChange: handleIntersection,\r\n  }\r\n\r\n  return (\r\n    <HashRouter>\r\n      <div>\r\n        <TitleBar setGridSize={setGridSize} />\r\n        <div style={{height: '70px'}}></div>\r\n        <PhotoList imagesList={imagesList} onLinkClick={onLinkClick} gridSize={gridSize} />\r\n        {apiStatus.isLoaded ? false : <div>Loading...</div>}\r\n        {apiStatus.error ? <div>再度読み込みしてね</div> : false}\r\n        <Observer {...intersectionOption}>\r\n        <div></div>\r\n        </Observer>\r\n\r\n        <Route path='/detail/:id' render={(props) => (\r\n          <PhotoDetail {...props} image={currentDetailStatus.imageInfo} />\r\n        )} />\r\n      </div>\r\n    </HashRouter>\r\n  );\r\n}\r\n\r\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport './index.css';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}