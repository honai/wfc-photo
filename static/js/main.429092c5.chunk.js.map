{"version":3,"sources":["PhotoDetail.js","PhotoList.js","App.js","index.js"],"names":["PhotoDetail","props","id","match","params","_useState","useState","image","_useState2","Object","slicedToArray","setImages","useEffect","fetch","then","response","json","ok","data","react_default","a","createElement","className","Link","to","src","url","PhotoList","_ref","imagesList","onLinkClick","map","key","concat","onClick","width","alt","description","App","before","current","listSize","setListSize","_useState3","isLoaded","error","_useState4","apiStatus","setApiStatus","_useState5","_useState6","setImagesList","_useState7","imageInfo","_useState8","currentDetailStatus","setCurrentDetailStatus","String","console","log","toConsumableArray","images","objectSpread","BrowserRouter","src_PhotoList_0","find","elem","size","Route","path","render","src_PhotoDetail","assign","ReactDOM","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.429092c5.chunk.js","sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './detail.css';\r\n\r\nconst PhotoDetail = (props) => {\r\n  const { id } = props.match.params;\r\n  const [image, setImages] = useState(props.image);\r\n  useEffect(() => {\r\n    fetch('https://wfc-2019.firebaseapp.com/image/' + id)\r\n      .then(response => response.json())\r\n      .then(response => {\r\n        if(response.ok) {\r\n          setImages(response.data);\r\n        }\r\n      })\r\n  }, [id]);\r\n\r\n  return (\r\n    <div className='photo-detail'>\r\n      <Link to='/'>\r\n        <div className='close-button'><i className=\"material-icons\">close</i></div>\r\n      </Link>\r\n      <div className='photo'>\r\n        <img src={image.url} />\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default PhotoDetail;","import React from 'react';\r\nimport { Link } from 'react-router-dom';\r\nimport './PhotoList.css';\r\n\r\nconst PhotoList = ({imagesList, onLinkClick}) => (\r\n  <div className='photos-wrap'>\r\n    {imagesList.map(image => (\r\n      <div className='item' key={image.id}>\r\n        <Link to={`/detail/${image.id}`} onClick={() => onLinkClick(image.id)}>\r\n          <img src={image.url} width='100%' alt={image.description} />\r\n        </Link>\r\n      </div>\r\n    ))}\r\n  </div>\r\n);\r\n\r\nexport default PhotoList;","import React, { useState, useEffect } from 'react';\nimport { BrowserRouter, Route, Link } from 'react-router-dom';\nimport ReactCssTransitionGroup from 'react-addons-css-transition-group';\nimport PhotoDetail from './PhotoDetail';\nimport PhotoList from './PhotoList';\nimport './animation.css';\n\nconst App = () => {\n  const [listSize, setListSize] = useState({before: 0, current: 10});\n  const [apiStatus, setApiStatus] = useState({isLoaded: false, error: false});\n  const [imagesList, setImagesList] = useState([]);\n  const [currentDetailStatus, setCurrentDetailStatus] = useState({id: null, imageInfo: {}});\n  useEffect(() => {\n    const url = 'https://wfc-2019.firebaseapp.com/images?'\n      + 'offset=' + String(listSize.before)\n      + '&limit=' + String(listSize.current - listSize.before);\n    console.log('started fetch');\n    fetch(url)\n      .then(response => response.json())\n      .then(response => {\n        if(response.ok) {\n          setImagesList([...imagesList, ...response.data.images]);\n          setApiStatus({...apiStatus, isLoaded: true, error: false});\n        } else {\n          setApiStatus({...apiStatus, isLoaded: true, error: true});\n          console.log('response is not ok.');\n        }\n      },\n      (error) => {\n        setApiStatus({...apiStatus, isLoaded: true, error: true});\n        console.log(error);\n      });\n  }, [listSize]);\n\n  function onLinkClick(id) {\n    setCurrentDetailStatus({id: id, imageInfo: imagesList.find(elem => elem.id === id)});\n  }\n\n  function gainListSize(size) {\n    setListSize({before: listSize.current, current: listSize.current + size});\n    console.log(listSize);\n  }\n  \n  if (apiStatus.error) {\n    return <div>再度読み込みしてね</div>;\n  } else if (!apiStatus.isLoaded) {\n    return <div>Loading...</div>;\n  } else {\n    return (\n      <BrowserRouter>\n        <div>\n          <div><h3>フォト</h3></div>\n          <PhotoList imagesList={imagesList} onLinkClick={onLinkClick} />\n          <button onClick={gainListSize}>もっと読み込む</button>\n\n          <Route path='/detail/:id' render={(props) => (\n            <PhotoDetail {...props} image={currentDetailStatus.imageInfo} />\n          )} />\n        </div>\n      </BrowserRouter>\n    );\n  }\n}\n\nexport default App;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));"],"sourceRoot":""}